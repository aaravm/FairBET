image:
  file: .gitpod.Dockerfile

tasks:
  - name: Setup environment
    init: |
      sudo apt-get update && sudo apt-get install -y \
      git \
      curl \
      cp .streamlit/secrets.toml.example .streamlit/secrets.toml
      echo "Python version:"
      python3 --version
      echo "Git version:"
      git --version
  - name: Create Nillion environment
    init: |
      echo "Nilup version:"
      nilup -V
    command: |
      nilup install latest
      nilup use latest
      sh telemetry.sh
      source /home/gitpod/.bashrc && export PATH=$PATH:/home/gitpod/.nilup/sdks/latest
      nillion -V
      pip install -r nillion-python-starter/requirements.txt
      nada build
      echo "âœ… Compiled all programs to binary (.nada.bin) in target/ directory"
      echo "ğŸ–¥ï¸ Check out Nada programs in src/ directory"
      echo "ğŸ§ª Check out Nada program test files in tests/ directory"
      echo "ğŸ‘‡ Run the addition program with the addition_test file with the 'nada run' command"
